package Utilitats

import javax.swing.*
import java.awt.*
import java.io.File


class Finestra : JFrame() {
	val fCh = JFileChooser(File(""))

	init {

		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setTitle("Crear apunts Quotes")
		setSize(400, 300)
		setLayout(BorderLayout())

		val panell1 = JPanel(FlowLayout())
		val panell2 = JPanel(BorderLayout())
		add(panell1, BorderLayout.NORTH)
		add(panell2, BorderLayout.CENTER)


		val fitxer = JTextField(25)
		panell1.add(fitxer)
		val botoTriarFitxer = JButton("Triar fitxer")
		panell1.add(botoTriarFitxer)

		panell2.add(JLabel("Llista de m√≠sics i quotes:"), BorderLayout.NORTH)
		val area = JTextArea()
		panell2.add(area)

		botoTriarFitxer.addActionListener {
			val r = fCh.showOpenDialog(this)
			if (r == JFileChooser.APPROVE_OPTION) {
				fitxer.setText(fCh.getSelectedFile().getName())
				val f = fCh.getSelectedFile()
				val linies = f.readLines()
				var cadena =""
				linies.forEach {
					val camps = it.split(";")
					if (camps.get(5) != "0") {
						camps.forEach {
							cadena +=(it + "\t")
						}
						cadena +="\n"
					}
				}
				area.setText(cadena)
			}
		}

	}
}

fun main(args: Array<String>) {
	EventQueue.invokeLater {
		Finestra().isVisible = true
	}
}

